!function($){if("undefined"!=typeof GMaps){var map=new GMaps({div:"#gmap",lat:wp_travel_drag_drop_uploader.lat,lng:wp_travel_drag_drop_uploader.lng}),input=document.getElementById("search-input"),autocomplete=new google.maps.places.Autocomplete(input);map.setCenter(wp_travel_drag_drop_uploader.lat,wp_travel_drag_drop_uploader.lng),map.setZoom(15),map.addMarker({lat:wp_travel_drag_drop_uploader.lat,lng:wp_travel_drag_drop_uploader.lng,title:wp_travel_drag_drop_uploader.loc,draggable:!0,dragend:function(e){var lat=e.latLng.lat(),lng=e.latLng.lng();map.setCenter(lat,lng);var latlng=new google.maps.LatLng(lat,lng),geocoder=geocoder=new google.maps.Geocoder;geocoder.geocode({latLng:latlng},function(results,status){status==google.maps.GeocoderStatus.OK&&results[1]&&($("#wp-traval-lat").val(lat),$("#wp-traval-lng").val(lng),$("#wp-traval-location").val(results[1].formatted_address),$("#search-input").val(results[1].formatted_address))})}}),autocomplete.bindTo("bounds",map),autocomplete.addListener("place_changed",function(){var place=autocomplete.getPlace();if(!place.geometry)return void window.alert("Autocomplete's returned place contains no geometry");map.removeMarkers(),place.geometry.viewport?map.fitBounds(place.geometry.viewport):(map.setCenter(place.geometry.location),map.setZoom(15));var lat=place.geometry.location.lat(),lng=place.geometry.location.lng(),latlng=new google.maps.LatLng(lat,lng),geocoder=geocoder=new google.maps.Geocoder;geocoder.geocode({latLng:latlng},function(results,status){status==google.maps.GeocoderStatus.OK&&results[1]&&($("#wp-traval-lat").val(lat),$("#wp-traval-lng").val(lng),$("#wp-traval-location").val(results[1].formatted_address),$("#search-input").val(results[1].formatted_address))}),map.addMarker({lat:lat,lng:lng,title:place.formatted_address,draggable:!0,dragend:function(e){var lat=e.latLng.lat(),lng=e.latLng.lng();map.setCenter(lat,lng);var latlng=new google.maps.LatLng(lat,lng),geocoder=geocoder=new google.maps.Geocoder;geocoder.geocode({latLng:latlng},function(results,status){status==google.maps.GeocoderStatus.OK&&results[1]&&($("#wp-traval-lat").val(lat),$("#wp-traval-lng").val(lng),$("#wp-traval-location").val(results[1].formatted_address))})}})})}if("undefined"!=typeof Maplace){var lat=wp_travel_drag_drop_uploader.lat,lon=wp_travel_drag_drop_uploader.lng,map=new Maplace({map_options:{set_center:[lat,lon],zoom:16,visualRefresh:!0},controls_on_map:!1});input=document.getElementById("search-input"),autocomplete=new google.maps.places.Autocomplete(input)}$.fn.tabs&&$(".wp-travel-tabs-wrap").tabs({activate:function(event,ui){if($(ui.newPanel).css({display:"table"}),$("#wp-travel-settings-current-tab").val($(ui.newPanel).attr("id")),map){var lat=wp_travel_drag_drop_uploader.lat,lon=wp_travel_drag_drop_uploader.lng;map.Load({locations:[{lat:lat,lon:lon,zoom:16,set_center:[lat,lon]}],force_generate_controls:!0}),autocomplete.addListener("place_changed",function(){var place=autocomplete.getPlace();if(!place.geometry)return void window.alert("Autocomplete's returned place contains no geometry");place.geometry.viewport||(map.setCenter(place.geometry.location),map.setZoom(15));var lat=place.geometry.location.lat(),lng=place.geometry.location.lng(),latlng=new google.maps.LatLng(lat,lng),geocoder=geocoder=new google.maps.Geocoder;geocoder.geocode({latLng:latlng},function(results,status){status==google.maps.GeocoderStatus.OK&&results[1]&&($("#wp-traval-lat").val(lat),$("#wp-traval-lng").val(lng),$("#wp-traval-location").val(results[1].formatted_address),$("#search-input").val(results[1].formatted_address))}),map.Load({locations:[{lat:lat,lon:lng,zoom:16,set_center:[lat,lng],visualRefresh:!0}],force_generate_controls:!0})})}},create:function(event,ui){$(ui.panel).css({display:"table"}),$("#wp-travel-settings-current-tab").val($(ui.panel).attr("id"))},load:function(event,ui){}}),$.fn.datepicker&&$("#wp-travel-start-date, #wp-travel-end-date").datepicker({language:"en",minDate:new Date}),$(document).on("click","#publish",function(){var start_date=$("#wp-travel-start-date").val(),end_date=$("#wp-travel-end-date").val(),error="";if(""==start_date&&""==end_date||(""==start_date&&(error+="Start date can't be empty!\n"),""==end_date&&(error+="End date can't be empty!\n"),""!=start_date&&""!=end_date&&(start_date=new Date(start_date),(end_date=new Date(end_date))<=start_date&&(error+="End date must greater than start date.\n"))),""!=error)return alert(error),!1;$(document).off("click","#publish")}),$(document).on("click","#wp-travel-enable-sale",function(){$(this).is(":checked")?$("#wp-travel-sale-price").removeAttr("disabled"):$("#wp-travel-sale-price").attr("disabled","disabled")})}(jQuery);