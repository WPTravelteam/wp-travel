function sidebarSticky(){if("undefined"==typeof Modernizr)return!1;if(void 0!==Modernizr.mq){setInterval(function(){Modernizr.mq("(min-width: 768px)")&&jQuery(".container .sticky-sidebar").stick_in_parent({container:jQuery(".container"),parent:".container",offset_top:50})},1e3)}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach(function(key){_defineProperty(target,key,source[key])}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}return target}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}jQuery(document).ready(function($){$(".open-all-link").click(function(e){e.preventDefault();var parent="#"+$(this).data("parent");$(parent+" .panel-title a").removeClass("collapsed").attr({"aria-expanded":"true"}),$(parent+" .panel-collapse").addClass("collapse in").css("height","auto"),$(this).hide(),$(parent+" .close-all-link").show(),$(parent+" #tab-accordion .panel-collapse").css("height","auto")}),$(".close-all-link").click(function(e){var parent="#"+$(this).data("parent");e.preventDefault(),$(parent+" .panel-title a").addClass("collapsed").attr({"aria-expanded":"false"}),$(parent+" .panel-collapse").removeClass("in").addClass("collapse"),$(this).hide(),$(parent+" .open-all-link").show()}),$(document).on("click",".wp-travel-notice-black-friday .notice-dismiss",function(){$.ajax(ajaxurl,{type:"POST",data:{action:"wp_travel_black_friday_dismiss"}})}),jQuery(document).on("click",".wp-travel-notice-v4-update .notice-dismiss",function(){$.ajax(ajaxurl,{type:"POST",data:{action:"wp_travel_v4_update_dismiss"}})})}),jQuery(document).ready(function($){$("input[name=wp_travel_book_now]").removeAttr("disabled"),$(".wp-travel-book-now").click(function(){$(this).slideUp("slow").siblings("form").slideToggle("slow")}),$(".wp-travel-booking-reset").click(function(){$(this).closest("form").slideUp("slow").siblings(".wp-travel-book-now").slideToggle("slow")}),$(document).on("click",".wp-travel-booknow-btn",function(){$(".wp-travel-booking-form").trigger("click");var winWidth=$(window).width(),tabHeight=$(".wp-travel-tab-wrapper").offset().top;if(winWidth<767)var tabHeight=$(".resp-accordion.resp-tab-active").offset().top;$("html, body").animate({scrollTop:tabHeight},1200)})}),jQuery(document).ready(sidebarSticky),jQuery(window).resize(sidebarSticky),jQuery(function($){function wp_travel_set_equal_height(){var base_height=0;$(".wp-travel-feature-slide-content").css({height:"auto"}),window.innerWidth>992&&($(".wp-travel-feature-slide-content").each(function(){$(this).height()>base_height&&(base_height=$(this).height())}),base_height>0&&($(".trip-headline-wrapper .left-plot").height(base_height),$(".trip-headline-wrapper .right-plot").height(base_height)))}function rate(rateLabel){for(var i=0;i<rateLabel;i++)$(".rate_label:eq( "+i+" )").addClass("dashicons-star-filled").removeClass("dashicons-star-empty ");for(j=4;j>=i;j--)$(".rate_label:eq( "+j+" )").addClass("dashicons-star-empty")}if($(".wp-travel-error").length>0&&$("html, body").animate({scrollTop:$(".wp-travel-error").offset().top-200},1e3),wp_travel_set_equal_height(),$(".wp-travel-gallery").magnificPopup({delegate:"a",type:"image",gallery:{enabled:!0}}),$(".wp-travel-send-enquiries").magnificPopup({type:"inline",preloader:!1,focus:"#wp-travel-enquiry-name",midClick:!0,callbacks:{open:function(){$("#wp-travel-enquiries").trigger("reset").parsley().reset()}}}),$("#wp-travel-tab-wrapper").easyResponsiveTabs({}),window.location.hash){var hash=window.location.hash.substring(1);if($("ul.resp-tabs-list > li."+hash).hasClass("wp-travel-ert")&&(lis=$("ul.resp-tabs-list > li"),lis.removeClass("resp-tab-active"),$("ul.resp-tabs-list > li."+hash).addClass("resp-tab-active"),tab_cont=$(".tab-list-content"),tab_cont.removeClass("resp-tab-content-active").hide(),$("#"+hash+".tab-list-content").addClass("resp-tab-content-active").show()),$(".wp-travel-tab-wrapper").length){var winWidth=$(window).width(),tabHeight=$(".wp-travel-tab-wrapper").offset().top;if(winWidth<767)var tabHeight=$(".resp-accordion.resp-tab-active").offset().top;$("html, body").animate({scrollTop:tabHeight},1200)}}$(".rate_label").hover(function(){var rateLabel=$(this).attr("data-id");$(".rate_label").removeClass("dashicons-star-filled"),rate(rateLabel)},function(){var ratedLabel=$("#wp_travel_rate_val").val();$(".rate_label").removeClass("dashicons-star-filled").addClass("dashicons-star-empty"),ratedLabel>0&&rate(ratedLabel)}),$(".rate_label").click(function(e){e.preventDefault(),$("#wp_travel_rate_val").val($(this).attr("data-id"))}),$(document).on("click",".wp-travel-count-info",function(e){e.preventDefault(),$(".wp-travel-review").trigger("click")}),$(document).on("click",".top-view-gallery",function(e){e.preventDefault(),$(".wp-travel-tab-gallery-contnet").trigger("click")}),$(document).on("click",".wp-travel-count-info, .top-view-gallery",function(e){e.preventDefault();var winWidth=$(window).width(),tabHeight=$(".wp-travel-tab-wrapper").offset().top;if(winWidth<767)var tabHeight=$(".resp-accordion.resp-tab-active").offset().top;$("html, body").animate({scrollTop:tabHeight},1200)}),$(window).on("resize",function(e){wp_travel_set_equal_height()}),$(".open-all-link").click(function(e){e.preventDefault(),$(".panel-title a").removeClass("collapsed").attr({"aria-expanded":"true"}),$(".panel-collapse").addClass("in"),$(".close-all-link").show(),$(".panel-collapse").css("height","auto")}),$(".close-all-link").click(function(e){e.preventDefault(),$(".panel-title a").addClass("collapsed").attr({"aria-expanded":"false"}),$(".panel-collapse").removeClass("in"),$(".open-all-link").show()}),jQuery(".wp-travel-booking-row").hide(),jQuery(".show-booking-row").click(function(event){event.preventDefault();var parent=$(this).closest("li.availabily-content");jQuery(this).parent(".action").siblings(".wp-travel-booking-row").toggle("fast",function(){parent.toggleClass("opened")}).addClass("animate"),jQuery(this).text(function(i,text){return text===wp_travel.strings.bookings.select?wp_travel.strings.bookings.close:wp_travel.strings.bookings.select})}),jQuery(".wp-travel-booking-row-fd").hide(),jQuery(".show-booking-row-fd").click(function(event){event.preventDefault(),jQuery(this).parent(".action").parent(".trip_list_by_fixed_departure_dates_booking").siblings(".wp-travel-booking-row-fd").toggle("fast").addClass("animate"),jQuery(this).text(function(i,text){return text===wp_travel.strings.bookings.select?wp_travel.strings.bookings.close:wp_travel.strings.bookings.select})}),jQuery(".wp-travel-pricing-dates").each(function(){var availabledate=jQuery(this).data("available-dates");availabledate?jQuery(this).wpt_datepicker({language:wp_travel.locale,autoClose:!0,minDate:new Date,onRenderCell:function(date,cellType){if("day"==cellType)return availabledate=availabledate.map(function(d){return new Date(d).toLocaleDateString("en-US")}),isDisabled=!availabledate.includes(date.toLocaleDateString("en-US")),{disabled:isDisabled}}}):jQuery(this).wpt_datepicker({language:wp_travel.locale,minDate:new Date,autoClose:!0})}),$(document).ready(function($){"undefined"!=typeof moment&&($(".wp-travel-pricing-days-night").wpt_datepicker({language:wp_travel.locale,minDate:new Date,autoClose:!0,onSelect:function(formattedDate,date,inst){if(date){var el=inst.$el,parent=$(el).closest("form").attr("id"),next_el=$("arrival_date"===$(el).attr("name")?"#"+parent+" input[name=departure_date]":"#"+parent+" input[name=arrival_date]"),day_to_add=parseInt(el.data("totaldays"));if(day_to_add<1)return void next_el.val(formattedDate);var _moment=moment(date);"arrival_date"===$(el).attr("name")?someFormattedDate=_moment.add(day_to_add,"days").format("YYYY-MM-DD"):someFormattedDate=_moment.subtract(day_to_add,"days").format("YYYY-MM-DD");next_el.wpt_datepicker().data("datepicker").date=new Date(someFormattedDate),next_el.val(someFormattedDate)}}}),$("input[name=departure_date]").each(function(){var departure_date=$(this).wpt_datepicker().data("datepicker");if(void 0!==departure_date){var day_to_add=departure_date.$el.data("totaldays");day_to_add>0&&(someFormattedDate=moment().add(day_to_add,"days").format("YYYY-MM-DD"),departure_date.update("minDate",new Date(someFormattedDate)))}})),"function"==typeof parsley&&$("input").parsley(),$(".login-page .message a").click(function(e){e.preventDefault(),$(".login-page form.login-form,.login-page form.register-form").animate({height:"toggle",opacity:"toggle"},"slow")})}),$(".dashboard-tab").easyResponsiveTabs({type:"vertical",width:"auto",fit:!0,tabidentify:"ver_1",activetab_bg:"#fff",inactive_bg:"#F5F5F5",active_border_color:"#c1c1c1",active_content_border_color:"#5AB1D0"}),$(".dashtab-nav").click(function(e){e.preventDefault();var tab=$(this).data("tabtitle");$("#"+tab).click(),$(this).hasClass("change-password")&&($("#wp-travel-dsh-change-pass-switch").is(":checked")||$("#wp-travel-dsh-change-pass-switch").trigger("click"))}),$("#wp-travel-dsh-change-pass-switch").change(function(e){$("#wp-travel-dsh-change-pass").slideToggle()}),$(".wp_travel_tour_extras_toggler").click(function(){$(this).parents(".wp_travel_tour_extras_option_single_content").children(".wp_travel_tour_extras_option_bottom").slideToggle()}),$(".wp-travel-magnific-popup").magnificPopup({type:"inline"})}),jQuery(function($){$(document).on("click",".paxpicker .icon-users",function(e){$(this).closest(".paxpicker").hasClass("is-active")?$(this).closest(".paxpicker").removeClass("is-active"):$(this).closest(".paxpicker").addClass("is-active")}),$(".add-to-cart-btn").on("click",function(){var pricing=$(this).closest("form").find(".pricing-categories");parseInt(pricing[0].dataset.selectedPax)<parseInt(pricing[0].dataset.min)?(alert(wp_travel.strings.alert.atleast_min_pax_alert),$(this).attr("disabled","disabled").css({opacity:".5"})):$(this).removeAttr("disabled").removeAttr("style")}),$(document).on("click",".pax-picker-plus, .pax-picker-minus",function(e){e.preventDefault();var parent=$(this).closest(".pricing-categories"),parent_id=parent.attr("id"),pricing_form=$("#"+parent.data("parent-form-id")),available_pax=parseInt(document.getElementById(parent_id).dataset.availablePax),selectedPax=parseInt(document.getElementById(parent_id).dataset.selectedPax),min_pax=(parseInt(document.getElementById(parent_id).dataset.max),parseInt(document.getElementById(parent_id).dataset.min));!function(el){var input=$(el).siblings(".paxpicker-input"),current_val=input.val()?parseInt(input.val()):0;$("#"+parent_id).find(".available-seats").find("span").text(function(){var step=parseInt(jQuery(input).attr("step"));return $(el).hasClass("pax-picker-plus")&&available_pax>0?(available_pax-=step,selectedPax+=step,current_val+=step,document.getElementById(parent_id).dataset.availablePax=available_pax,document.getElementById(parent_id).dataset.selectedPax=selectedPax,input.removeAttr("disabled").val(current_val).trigger("change"),available_pax):$(el).hasClass("pax-picker-minus")&&current_val>0?(available_pax+=step,selectedPax-=step,current_val-=step,document.getElementById(parent_id).dataset.availablePax=available_pax,document.getElementById(parent_id).dataset.selectedPax=selectedPax,input.removeAttr("disabled").val(current_val).trigger("change"),available_pax):void 0})}(this),selectedPax<min_pax&&pricing_form.find("input[type=submit]").attr("disabled","disabled").css({opacity:".5"})||pricing_form.find("input[type=submit]").removeAttr("disabled").removeAttr("style");var display_value="",pax_input="";if($("#"+parent_id+" .paxpicker-input").each(function(){if($(this).val()>0){var type=$(this).data("type"),custom_label=$(this).data("custom");"custom"===type&&""!=custom_label&&(type=custom_label);var category_id=$(this).data("category-id");display_value+=", "+type+" x "+$(this).val(),pax_input+='<input type="hidden" name="pax['+category_id+']" value="'+$(this).val()+'" >'}}),!display_value)var display_value=$("#"+parent_id).siblings(".summary").find(".participants-summary-container").data("default");display_value=display_value.replace(/^,|,$/g,""),$("#"+parent_id).siblings(".summary").find(".participants-summary-container").val(display_value),$("#"+parent_id+" .pricing-input").html(pax_input)})}),jQuery(function($){$("#wp-travel-enquiries").submit(function(e){e.preventDefault(),$(".enquiry-response").remove();var formData=$("#wp-travel-enquiries").serializeArray();formData.push({name:"nonce",value:wp_travel.nonce});var text_processing=$("#wp_travel_label_processing").val(),text_submit_enquiry=$("#wp_travel_label_submit_enquiry").val();$.ajax({type:"POST",url:wp_travel.ajaxUrl,data:formData,beforeSend:function(){$("#wp-travel-enquiry-submit").addClass("loading-bar loading-bar-striped active").val(text_processing).attr("disabled","disabled")},success:function(data){if(0==data.success){var message='<span class="enquiry-response enquiry-error-msg">'+data.data.message+"</span>";$("#wp-travel-enquiries").append(message)}else if(1==data.success){var message='<span class="enquiry-response enquiry-success-msg">'+data.data.message+"</span>";$("#wp-travel-enquiries").append(message),setTimeout(function(){jQuery("#wp-travel-send-enquiries").magnificPopup("close"),$("#wp-travel-enquiries .enquiry-response ").hide()},"3000")}return $("#wp-travel-enquiry-submit").removeClass("loading-bar loading-bar-striped active").val(text_submit_enquiry).removeAttr("disabled","disabled"),$("#wp-travel-enquiry-name").val(""),$("#wp-travel-enquiry-email").val(""),$("#wp-travel-enquiry-query").val(""),!1}}),$("#wp-travel-enquiries").trigger("reset")})}),jQuery(document).ready(function($){"undefined"!=typeof parsley&&$(".wp-travel-add-to-cart-form").parsley(),$(".wp-travel-add-to-cart-form").submit(function(event){event.preventDefault();var parent="#"+$(this).attr("id"),cart_fields={};$(parent+" input, "+parent+" select").each(function(index){var filterby=$(this).attr("name"),filterby_val=$(this).val();if(1==$(this).data("multiple")){if(void 0===cart_fields[filterby]&&(cart_fields[filterby]=[]),"checkbox"==$(this).attr("type")&&$(this).is(":checked")&&cart_fields[filterby].push(filterby_val),1==$(this).data("dependent")){var pare=$(this).data("parent");$("#"+pare).is(":checked")&&cart_fields[filterby].push(filterby_val)}}else cart_fields[filterby]=filterby_val}),cart_fields.action="wt_add_to_cart",$.ajax({type:"POST",url:wp_travel.ajaxUrl,data:cart_fields,beforeSend:function(){},success:function(data){location.href=wp_travel.cartUrl}})}),$(".wp-travel-cart-remove").click(function(e){if(e.preventDefault(),confirm(wp_travel.strings.confirm)){var cart_id=$(this).data("cart-id");$.ajax({type:"POST",url:wp_travel.ajaxUrl,data:{action:"wt_remove_from_cart",cart_id:cart_id},beforeSend:function(){},success:function(data){location.href=wp_travel.cartUrl}})}}),$(".wp-travel-update-cart-btn").click(function(e){e.preventDefault();var update_cart_fields={};$(".ws-theme-cart-page tr.responsive-cart").each(function(i){var cart_id=$(this).find('input[name="cart_id"]').val(),pricing_id=$(this).find('input[name="pricing_id"]').val(),extra_id=!1,extra_qty=!1,pax={};$(this).find("input.wp-travel-trip-pax").each(function(){pax[$(this).data("category-id")]=this.value});var update_cart_field={};update_cart_field.extras={},update_cart_field.extras.id={},update_cart_field.extras.qty={},update_cart_field.pax=pax,update_cart_field.pricing_id=pricing_id,update_cart_field.cart_id=cart_id,$(this).next(".child_products").find('input[name="extra_id"]').length>0&&$(this).next(".child_products").find('input[name="extra_id"]').each(function(j){extra_id=$(this).val(),update_cart_field.extras.id[j]=extra_id}),$(this).next(".child_products").find('input[name="extra_qty"]').length>0&&$(this).next(".child_products").find('input[name="extra_qty"]').each(function(j){extra_qty=$(this).val(),update_cart_field.extras.qty[j]=extra_qty}),update_cart_fields[i]=update_cart_field}),$.ajax({type:"POST",url:wp_travel.ajaxUrl,data:{update_cart_fields:update_cart_fields,action:"wt_update_cart"},beforeSend:function(){},success:function(data){data&&location.reload()}})}),$(".wp-travel-apply-coupon-btn").click(function(e){e.preventDefault();var trip_ids={};$(".ws-theme-cart-page tr.responsive-cart").each(function(i){trip_id=$(this).find('input[name="trip_id"]').val(),trip_ids[i]=trip_id});var CouponCode=$('input[name="wp_travel_coupon_code_input"]').val();$.ajax({type:"POST",url:wp_travel.ajaxUrl,data:{trip_ids:trip_ids,CouponCode:CouponCode,action:"wt_cart_apply_coupon"},beforeSend:function(){},success:function(data){data&&location.reload()}})}),$(".wp-travel-pax, .wp-travel-tour-extras-qty").on("change",function(){$(".wp-travel-update-cart-btn").removeAttr("disabled","disabled"),$(".book-now-btn").attr("disabled","disabled")}),$(document).on("click",".wp-travel-add-traveller",function(e){e.preventDefault();var index=$(this).parent(".text-center").siblings(".payment-content").find(".payment-traveller").length,unique_index=$(".payment-content .payment-traveller:last").data("unique-index");unique_index?unique_index+=1:unique_index=index;var cart_id=$(this).data("cart-id"),template=wp.template("traveller-info");$(this).closest(".text-center").siblings(".payment-content").append(JSON.parse(template({index:index,cart_id:cart_id,unique_index:unique_index})))}),$(document).on("click",".traveller-remove",function(e){e.preventDefault(),confirm("Are you sure you want to traveler?")&&($(this).closest(".payment-traveller").remove(),$(".payment-traveller.added").each(function(i){$(this).find(".traveller-index").html(i+1)}))}),$(document).on("click, change",".wp-travel-pax",function(){var $this=$(this),productPrice=$this.closest(".product-price"),availablePax=productPrice.data("maxPax"),minPax=productPrice.data("minPax"),selectedPax=0;productPrice.find(".wp-travel-pax").each(function(index){selectedPax+=parseInt(this.value)}),selectedPax>availablePax?(alert(wp_travel.strings.alert.max_pax_alert.replace("{max_pax}",availablePax)),$this.val(parseInt(availablePax)+parseInt($this.val())-parseInt(selectedPax)),$(".wp-travel-update-cart-btn").removeAttr("disabled")):selectedPax<minPax?(alert(wp_travel.strings.alert.min_pax_alert.replace("{min_pax}",minPax)),$(".wp-travel-update-cart-btn").attr("disabled","disabled")):$(".wp-travel-update-cart-btn").removeAttr("disabled")})});var wp_travel_cart={};wp_travel_cart.format=function(_num){var style=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"currency",_wp_travel=wp_travel,_currencySymbol=(_wp_travel.currency,_wp_travel.currency_symbol),currencyPosition=_wp_travel.currency_position,decimalSeparator=_wp_travel.decimal_separator,_toFixed=_wp_travel.number_of_decimals,kiloSeparator=_wp_travel.thousand_separator,regEx=new RegExp("\\d(?=(\\d{3})+\\".concat(decimalSeparator,")"),"gi"),replaceWith="$&".concat(kiloSeparator),_formattedNum=parseFloat(_num).toFixed(_toFixed).replace(/\./,decimalSeparator).replace(regEx,replaceWith);return"decimal"==style?_formattedNum:{left:"".concat(_currencySymbol,"<span>").concat(_formattedNum,"</span>"),left_with_space:"".concat(_currencySymbol," <span>").concat(_formattedNum,"</span>"),right:"<span>".concat(_formattedNum,"</span>").concat(_currencySymbol),right_with_space:"<span>".concat(_formattedNum,"</span> ").concat(_currencySymbol)}[currencyPosition]},wp_travel_cart.timeout=function(promise,ms){return new Promise(function(resolve,reject){setTimeout(function(){reject(new Error("request timeout"))},ms),resolve(promise.then(resolve,reject))})};var wptravelcheckout=function(shoppingCart){var bookNowBtn=document.getElementById("wp-travel-book-now");if(bookNowBtn&&bookNowBtn.addEventListener("wptcartchange",function(e){e.target.disabled=!0}),bookNowBtn&&bookNowBtn.addEventListener("click",function(e){}),shoppingCart){var cartItems=shoppingCart&&shoppingCart.querySelectorAll("[data-cart-id]");if(!(cartItems&&cartItems.length<=0)){var toggleBookNowBtn=function(){var dirtyItems=shoppingCart.querySelectorAll("[data-dirty]");bookNowBtn&&(dirtyItems&&dirtyItems.length>0?bookNowBtn.disabled=!0:bookNowBtn.disabled=!1)},toggleCartLoader=function(on){on?cartLoader.removeAttribute("style"):cartLoader.style.display="none"},cartLoader=shoppingCart.querySelector(".wp-travel-cart-loader");cartLoader&&toggleCartLoader(!0),wp_travel&&wp_travel_cart.timeout(fetch("".concat(wp_travel.ajaxUrl,"?action=wp_travel_get_cart&_nonce=").concat(wp_travel._nonce)).then(function(res){res.json().then(function(result){toggleCartLoader(),result.success&&"WP_TRAVEL_CART"===result.data.code&&result.data.cart&&(wp_travel_cart.cart=result.data.cart,Object.freeze(wp_travel_cart.cart))})}),1e4).catch(function(error){alert("[X] Request Timeout!"),toggleCartLoader()});var updateItem=function(id){var _data={},tripTotalWOExtras=0,tripTotalPartialWOExtras=0,extrasTotal=0,tripTotal=0,item=wp_travel_cart.cart&&wp_travel_cart.cart.cart_items&&wp_travel_cart.cart.cart_items[id],itemNode=shoppingCart.querySelector('[data-cart-id="'.concat(id,'"]')),pricing=item.trip_data.pricings.find(function(p){return p.id==parseInt(item.pricing_id)}),categories=pricing.categories,_tripExtras=pricing.trip_extras,wptCTotals=itemNode.querySelectorAll("[data-wpt-category-count]"),payoutPercentage=item.trip_data&&item.trip_data.minimum_partial_payout_percent;itemNode.querySelectorAll("[data-wpt-category]").forEach(function(fg){var categoryTotalContainer=fg.querySelector("[data-wpt-category-total]"),dataCategoryCount=fg.querySelector("[data-wpt-category-count-input]"),dataCategoryPrice=fg.querySelector("[data-wpt-category-price]"),_category=categories.find(function(c){return c.id==parseInt(fg.dataset.wptCategory)}),_price=_category&&_category.is_sale?parseFloat(_category.sale_price):parseFloat(_category.regular_price),_count=dataCategoryCount&&parseInt(dataCategoryCount.value)||0;if(_category.has_group_price){var _groupPrice=_category.group_prices.find(function(gp){return _count>=parseInt(gp.min_pax)&&_count<=parseInt(gp.max_pax)});_price=_groupPrice&&_groupPrice.price||_price,dataCategoryPrice&&(dataCategoryPrice.innerHTML=wp_travel_cart.format(_price))}var categoryTotal="group"==_category.price_per?_count>0&&_price||0:_price*_count;wptCTotals&&wptCTotals.forEach(function(wpct){wpct.dataset.wptCategoryCount==fg.dataset.wptCategory&&(wpct.innerHTML=_count)}),categoryTotalContainer&&(categoryTotalContainer.innerHTML=wp_travel_cart.format(categoryTotal)),tripTotal+=parseFloat(categoryTotal),tripTotalWOExtras+=parseFloat(categoryTotal),tripTotalPartialWOExtras+=parseFloat(categoryTotal)*parseFloat(payoutPercentage)/100});var formGroupsTx=itemNode.querySelectorAll("[data-wpt-tx]");return formGroupsTx&&formGroupsTx.forEach(function(tx){var _extra=_tripExtras.find(function(c){return c.id==parseInt(tx.dataset.wptTx)});if(_extra.tour_extras_metas){var txTotalContainer=tx.querySelector("[data-wpt-tx-total]"),datatxCount=tx.querySelector("[data-wpt-tx-count-input]"),_price=_extra.is_sale&&_extra.tour_extras_metas.extras_item_sale_price||_extra.tour_extras_metas.extras_item_price,_count=datatxCount&&datatxCount.value||0,itemTotal=parseFloat(_price)*parseInt(_count);txTotalContainer&&(txTotalContainer.innerHTML=wp_travel_cart.format(itemTotal)),tripTotal+=itemTotal,extrasTotal+=itemTotal}}),_data={tripTotalWOExtras:tripTotalWOExtras,tripTotalPartialWOExtras:tripTotalPartialWOExtras,extrasTotal:extrasTotal,tripTotal:tripTotal},itemNode.querySelector("[data-wpt-item-total]").innerHTML=wp_travel_cart.format(tripTotal),_data};shoppingCart&&shoppingCart.addEventListener("wptcartchange",function(e){var cartTotal=0,tripTotalWOExtras=0,txTotal=0,tripTotalPartialWOExtras=0,cartTotalContainers=document.querySelectorAll("[data-wpt-cart-total]"),cartTotalPartialContainers=document.querySelectorAll("[data-wpt-cart-partial-total]"),cartSubtotalContainer=e.target.querySelector("[data-wpt-cart-subtotal]"),cartDiscountContainer=e.target.querySelector("[data-wpt-cart-discount]"),cartTaxContainer=e.target.querySelector("[data-wpt-cart-tax]"),_cartItems=e.target.querySelectorAll("[data-cart-id]");if(_cartItems&&_cartItems.forEach(function(ci){var totals=updateItem(ci.dataset.cartId);cartTotal+=totals.tripTotal,tripTotalWOExtras+=totals.tripTotalWOExtras,tripTotalPartialWOExtras+=totals.tripTotalPartialWOExtras,txTotal+=totals.extrasTotal}),cartSubtotalContainer&&(cartSubtotalContainer.innerHTML=wp_travel_cart.format(cartTotal)),e.detail&&e.detail.coupon||wp_travel_cart.cart.coupon&&wp_travel_cart.cart.coupon.coupon_id){var coupon=e.detail&&e.detail.coupon||wp_travel_cart.cart.coupon,_cValue=coupon.value&&parseInt(coupon.value)||0;e.target.querySelector("[data-wpt-cart-full-total]").innerHTML=wp_travel_cart.format(cartTotal),cartDiscountContainer&&(cartDiscountContainer.innerHTML="fixed"==coupon.type?"- "+wp_travel_cart.format(_cValue):"- "+wp_travel_cart.format(cartTotal*_cValue/100),cartDiscountContainer.closest("[data-wpt-extra-field]").removeAttribute("style")),cartTotal="fixed"==coupon.type?cartTotal-_cValue:cartTotal*(100-_cValue)/100}wp_travel_cart.cart.tax&&(cartTaxContainer&&(cartTaxContainer.innerHTML="+ "+wp_travel_cart.format(cartTotal*parseInt(wp_travel_cart.cart.tax)/100)),cartTotal=cartTotal*(100+parseInt(wp_travel_cart.cart.tax))/100),cartTotalContainers&&cartTotalContainers.forEach(function(ctt){return ctt.innerHTML=wp_travel_cart.format(cartTotal)}),cartTotalPartialContainers&&cartTotalPartialContainers.forEach(function(ctpc){var _partialTotal=tripTotalPartialWOExtras+txTotal;wp_travel_cart.cart.tax&&(_partialTotal=_partialTotal*(100+parseFloat(wp_travel_cart.cart.tax))/100),ctpc.innerHTML=wp_travel_cart.format(_partialTotal)});var cartItemsCountContainer=e.target.querySelector("[data-wpt-cart-item-count]");cartItemsCountContainer&&(cartItemsCountContainer.innerHTML=_cartItems.length),console.debug({cartTotal:cartTotal,tripTotalWOExtras:tripTotalWOExtras,txTotal:txTotal,tripTotalPartialWOExtras:tripTotalPartialWOExtras})}),cartItems&&cartItems.forEach(function(ci){var edit=ci.querySelector("a.edit"),collapse=ci.querySelector(".update-fields-collapse"),_deleteBtn=ci.querySelector(".del-btn"),loader=ci.querySelector(".wp-travel-cart-loader");_deleteBtn&&_deleteBtn.addEventListener("click",function(e){e.preventDefault(),confirm(_deleteBtn.dataset.l10n)&&(toggleCartLoader(!0),wp_travel_cart.timeout(fetch("".concat(wp_travel.ajaxUrl,"?action=wp_travel_remove_cart_item&_nonce=").concat(wp_travel._nonce,"&cart_id=").concat(ci.dataset.cartId)).then(function(res){return res.json()}).then(function(result){result.success&&"WP_TRAVEL_REMOVED_CART_ITEM"==result.data.code&&(result.data.cart&&result.data.cart.length<=0&&window.location.reload(),ci.remove(),shoppingCart.dispatchEvent(new Event("wptcartchange")),toggleCartLoader())}),1e4).catch(function(error){alert("[X] Request Timeout!"),toggleCartLoader()}))}),edit&&edit.addEventListener("click",function(e){if(collapse.className.indexOf("active")<0?(collapse.style.display="block",collapse.classList.add("active")):(collapse.style.display="none",collapse.classList.remove("active")),!(collapse.className.indexOf("active")<0)){var cart_id=e.target.dataset.wptTargetCartId,cart=wp_travel_cart.cart.cart_items&&wp_travel_cart.cart.cart_items[cart_id]||{};if(cart.trip_data&&cart.trip_data.inventory&&"yes"===cart.trip_data.inventory.enable_trip_inventory){var qs="",pricing_id=cart.pricing_id||0;qs+=pricing_id&&"pricing_id=".concat(pricing_id)||"";var _trip_id=cart.trip_data&&cart.trip_data.id||0;qs+=_trip_id&&"&trip_id=".concat(_trip_id)||"";var trip_time=cart.trip_time;if(qs+=trip_time&&"&trip_time=".concat(trip_time)||"",cart.arrival_date&&"invalid date"!=new Date(cart.arrival_date).toString().toLowerCase()){var _date=new Date(cart.arrival_date),_year=_date.getFullYear(),_month=_date.getMonth()+1;_month=String(_month).padStart(2,"0");var _day=String(_date.getDate()).padStart(2,"0");_date="".concat(_year,"-").concat(_month,"-").concat(_day),qs+=_date&&"&selected_date=".concat(_date)||""}loader.removeAttribute("style"),wp_travel_cart.timeout(fetch("".concat(wp_travel.ajaxUrl,"?").concat(qs,"&action=wp_travel_get_inventory&_nonce=").concat(wp_travel._nonce)).then(function(res){return res.json().then(function(result){if(loader.style.display="none",result.success&&"WP_TRAVEL_INVENTORY_INFO"===result.data.code&&result.data.inventory.length>0){var inventory=result.data.inventory[0];ci.querySelectorAll("[data-wpt-category-count-input]").forEach(function(_ci){return _ci.max=inventory.pax_available})}})})).catch(function(error){alert("[X] Request Timeout!"),loader.style.display="none"})}}});var wptCategories=ci.querySelectorAll("[data-wpt-category], [data-wpt-tx]");wptCategories&&wptCategories.forEach(function(wc){var _input=wc.querySelector("[data-wpt-category-count-input], [data-wpt-tx-count-input]"),spinners=wc.querySelectorAll("[data-wpt-count-up],[data-wpt-count-down]");spinners&&spinners.forEach(function(sp){sp.addEventListener("click",function(e){e.preventDefault();var paxSum=0;if(ci.querySelectorAll("[data-wpt-category-count-input]").forEach(function(input){paxSum+=parseInt(input.value)}),void 0!==sp.dataset.wptCountUp)if(_input&&_input.dataset.wptCategoryCountInput){var _inputvalue=parseInt(_input.value)+1<0?0:parseInt(_input.value)+1;paxSum+1<=parseInt(_input.max)&&_inputvalue>=parseInt(_input.min)&&(_input.value=_inputvalue)}else _input.value=parseInt(_input.value)+1;if(void 0!==sp.dataset.wptCountDown)if(_input&&_input.dataset.wptCategoryCountInput){var _inputvalue2=parseInt(_input.value)-1<0?0:parseInt(_input.value)-1;paxSum-1<=parseInt(_input.max)&&_inputvalue2>=parseInt(_input.min)&&(_input.value=_inputvalue2)}else _input.value=parseInt(_input.value)-1<parseInt(_input.min)?_input.min:parseInt(_input.value)-1;shoppingCart.dispatchEvent(new Event("wptcartchange")),bookNowBtn&&bookNowBtn.dispatchEvent(new Event("wptcartchange")),ci.querySelector('form [type="submit"]').disabled=!1,ci.querySelector("h5 a").style.color="orange"})})})}),cartItems&&cartItems.forEach(function(ci){var loader=ci.querySelector(".wp-travel-cart-loader"),categories=ci.querySelectorAll("[data-wpt-category]"),tripExtras=ci.querySelectorAll("[data-wpt-tx]"),_form=ci.querySelector("form");_form.addEventListener("submit",function(e){e.preventDefault();var _btn=_form.querySelector('[type="submit"]');_btn.disabled=!0,loader.removeAttribute("style");var cartId=ci.dataset.cartId,pax={};categories&&categories.forEach(function(cf){var _input=cf.querySelector("[data-wpt-category-count-input]"),categoryId=cf.dataset.wptCategory,value=_input&&_input.value;pax=_objectSpread(_objectSpread({},pax),{},_defineProperty({},categoryId,value))});var txCounts={};tripExtras&&tripExtras.forEach(function(tx){var _input=tx.querySelector("[data-wpt-tx-count-input]"),txId=tx.dataset.wptTx,value=_input&&_input.value;txCounts=_objectSpread(_objectSpread({},txCounts),{},_defineProperty({},txId,value))});var _data={pax:pax,wp_travel_trip_extras:{id:Object.keys(txCounts),qty:Object.values(txCounts)}};wp_travel_cart.timeout(fetch("".concat(wp_travel.ajaxUrl,"?action=wp_travel_update_cart_item&cart_id=").concat(cartId,"&_nonce=").concat(wp_travel._nonce),{method:"POST",body:JSON.stringify(_data)}).then(function(res){return res.json()}).then(function(result){if(loader.style.display="none",result.success){wp_travel_cart.cart=result.data.cart;var total=result.data.cart.total
;wp_travel.payment&&(wp_travel.payment.trip_price=parseFloat(total.total),wp_travel.payment.payment_amount=parseFloat(total.total_partial)),toggleBookNowBtn(),ci.querySelector("h5 a").removeAttribute("style")}else _btn.disabled=!1}),1e4).catch(function(error){alert("[X] Request Timeout!"),loader.style.display="none",_btn.disabled=!1})})});var paymentModeInput=document.getElementById("wp-travel-payment-mode");paymentModeInput&&paymentModeInput.addEventListener("change",function(e){var basket=document.querySelector("#shopping-cart"),container=basket&&basket.querySelector("[data-wpt-cart-partial-total]")&&basket.querySelector("[data-wpt-cart-partial-total]").closest("p");"partial"===e.target.value?container&&"none"==container.style.display&&container.removeAttribute("style"):container.style.display="none"});var couponForm=document.getElementById("wp-travel-coupon-form"),couponBtn=couponForm&&couponForm.querySelector("button"),couponField=couponForm&&couponForm.querySelector(".coupon-input-field");couponField&&couponField.addEventListener("keyup",function(e){toggleError(e.target),e.target.value.length>0&&e.target.removeAttribute("style")});var toggleError=function(el,message){if(message){var p=document.createElement("p");p.classList.add("error"),p.innerHTML=message,el.after(p)}else{var error=el.parentElement.querySelector(".error");error&&error.remove()}};couponBtn&&couponField&&couponBtn.addEventListener("click",function(e){e.preventDefault(),couponField.value.length<=0?(couponField.style.borderColor="red",couponField.focus()):(toggleCartLoader(!0),e.target.disabled=!0,wp_travel_cart.timeout(fetch("".concat(wp_travel.ajaxUrl,"?action=wp_travel_apply_coupon&_nonce=").concat(wp_travel._nonce),{method:"POST",body:JSON.stringify({couponCode:couponField.value})}).then(function(res){return res.json()}).then(function(result){toggleCartLoader(),result.success?(wp_travel_cart.cart=result.data.cart,couponField.toggleAttribute("readonly"),e.target.innerHTML=e.target.dataset.successL10n,e.target.style.backgroundColor="green",shoppingCart.dispatchEvent(new CustomEvent("wptcartchange",{detail:{coupon:result.data.cart.coupon}}))):(couponField.focus(),toggleError(couponField,result.data[0].message),e.target.disabled=!1)}),1e4).catch(function(error){alert("[X] Request Timeout!"),toggleCartLoader()}))})}}};document.getElementById("shopping-cart")&&wptravelcheckout(document.getElementById("shopping-cart")),jQuery(document).ready(function($){$(".btn-wp-travel-filter").on("click",function(){var view_mode=$(".wp-travel-view-mode.active-mode").data("mode");pathname=$("#wp-travel-archive-url").val(),pathname||(pathname=window.location.pathname),query_string="?",pathname.match(/\?/)&&(query_string="&"),$(".wp_travel_input_filters").each(function(){filterby=$(this).attr("name"),filterby_val=$(this).val(),query_string+=filterby+"="+filterby_val+"&"}),redirect_url=pathname+query_string,redirect_url=redirect_url.replace(/&+$/,""),redirect_url=redirect_url+"&view_mode="+view_mode,window.location=redirect_url}),"grid"==$(".wp-travel-view-mode.active-mode").data("mode")?$("body").addClass("wp-travel-grid-mode"):$("body").removeClass("wp-travel-list-mode")}),jQuery(function($){function findGetParameter(parameterName){for(var result=null,tmp=[],items=location.search.substr(1).split("&"),index=0;index<items.length;index++)tmp=items[index].split("="),tmp[0]===parameterName&&(result=decodeURIComponent(tmp[1]));return result}$(document).ready(function(){var prices=[];"object"==typeof wp_travel.prices&&(prices=wp_travel.prices.map(function(x){return parseInt(x,10)}));var min=Math.min.apply(null,prices),max=Math.max.apply(null,prices);if(findGetParameter("min_price"))var filteredMin=findGetParameter("min_price");else filteredMin=min;if(findGetParameter("max_price"))var filteredMax=findGetParameter("max_price");else filteredMax=max;$(".wp-travel-range-slider").slider({range:!0,min:min,max:max,values:[filteredMin,filteredMax],slide:function(event,ui){$(".price-amount").val(wp_travel.currency_symbol+ui.values[0]+" - "+wp_travel.currency_symbol+ui.values[1]),$(".wp-travel-range-slider").siblings(".wp-travel-filter-price-min").val(ui.values[0]),$(".wp-travel-range-slider").siblings(".wp-travel-filter-price-max").val(ui.values[1])}}),$(".price-amount").val(wp_travel.currency_symbol+$(".wp-travel-range-slider").slider("values",0)+" - "+wp_travel.currency_symbol+$(".wp-travel-range-slider").slider("values",1)),$(".trip-duration-calender input").wpt_datepicker({language:wp_travel.locale})}),$(".wp-travel-filter-search-submit").on("click",function(){var view_mode=$(this).siblings(".wp-travel-widget-filter-view-mode").data("mode");pathname=$(this).siblings(".wp-travel-widget-filter-archive-url").val(),pathname||(pathname=window.location.pathname),query_string="?",pathname.match(/\?/)&&(query_string="&");var data_index=$(this).siblings(".filter-data-index").data("index");$(".wp_travel_search_widget_filters_input"+data_index).each(function(){filterby=$(this).attr("name"),filterby_val=$(this).val(),query_string+=filterby+"="+filterby_val+"&"}),redirect_url=pathname+query_string,redirect_url=redirect_url.replace(/&+$/,""),redirect_url=redirect_url+"&view_mode="+view_mode,window.location=redirect_url})});